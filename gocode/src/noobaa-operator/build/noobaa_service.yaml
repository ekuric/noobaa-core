apiVersion: v1
kind: Service
metadata:
  name: noobaa-services
  labels:
    app: noobaa
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/scheme: http
    prometheus.io/port: "8080"
spec:
  # LoadBalancer service will alocate an external ip automatically on public cloud providers (aws\azure\gcp, etc.)
  # for on premise kuberenets clusters there are 3rd party solutions that provide the same functionality. e.g: metalLB (https://metallb.universe.tf)
  # metalLB installs a controller in the cluster that handles LoadBalancer services and allocates an external ip
  # without a controller handling LoadBalancer service, it will be handled as a NodePort (can be accessed through the node ip and a random port allocated by kubernetes)
  type: LoadBalancer
  ports:
    - port: 80
      name: s3
    - port: 443
      name: s3-https
    - port: 8080
      name: mng
    - port: 8443
      name: mng-https
  selector:
    app: noobaa
